import 'dart:developer';import 'package:flutter/material.dart';import 'package:get/get.dart';import 'package:tracenac/features/tools/record_audio/record_audio_controller.dart';import '../../../core/utils/app_color.dart';import '../../assets/assets_model_class/assets_model_class.dart';class RecordAudio extends StatefulWidget {  const RecordAudio({super.key});  @override  State<RecordAudio> createState() => _RecordAudioState();}class _RecordAudioState extends State<RecordAudio> {  final RecordAudioController controller = Get.put(RecordAudioController());  @override  void initState() {    // TODO: implement initState    super.initState();    controller.getAssetsApi("");  }  @override  Widget build(BuildContext context) {    return Scaffold(      appBar: AppBar(        backgroundColor: AppColor.appBarColor,        title: Text("Record Audio"),      ),      body: Obx(()=> controller.isLoading.value ? Center(child: CircularProgressIndicator(),) :  Center(        child: Padding(          padding: const EdgeInsets.symmetric(horizontal: 18.0),          child: Column(          crossAxisAlignment: CrossAxisAlignment.start,          // mainAxisAlignment: MainAxisAlignment.center,          children: [            SizedBox(height: 30),            Text(              "Assert ID",              style: const TextStyle(                fontFamily: "Proxima",                fontWeight: FontWeight.w600,                fontSize: 14,              ),            ),            const SizedBox(height: 4),            // TextFormField(            //   controller: controller.assetsIDController,            //   style: TextStyle(fontFamily: "Proxima", ),            //   decoration: InputDecoration(            //     hintText: "Input title",            //     hintStyle: TextStyle(fontFamily: "Proxima", ),            //     border: OutlineInputBorder(            //       borderRadius: BorderRadius.circular(8),            //       borderSide: BorderSide(            //         color: Colors.grey.shade300,            //       ),            //     ),            //     filled: true,            //     fillColor: Colors.white,            //   ),            // ),            Builder(              builder: (context) {                final assetsList = controller.assetsModelClass?.asetsMsg ??[];                final dropdownValue = assetsList.firstWhere((e) => e.assetName == controller.selectedAssetsName?.value,                  orElse: () => assetsList.first,);                return Column(                  crossAxisAlignment: CrossAxisAlignment.start,                  children: [                    DropdownButtonFormField<AssetsMsg>(                      value: dropdownValue,                      style: TextStyle(                        fontSize: 14,                        fontFamily: "Proxima",                        fontWeight:                        FontWeight.w400,                        color: Colors.black,                      ),                      items: assetsList.map((partner,) {                        final displayText = "${partner.assetId ?? 'ID'} - ${partner.assetName ?? 'N/A'}";                        return DropdownMenuItem<AssetsMsg>(                          value: partner,                          child: Text(                            displayText,                          ),                        );                      }).toList(),                      onChanged: (selectedPartner) {                        if (selectedPartner != null) {                          controller.selectedAssetsName?.value = selectedPartner.assetName ?? '';                          // controller1.assetsNameController.text = selectedPartner.assetName ?? '';                          controller.assetsIDController.text = selectedPartner.assetId ?? '';                          log("controller.assetsIDController.text==> ""${controller.assetsIDController.text}");                          // controller.assetsCodeController.text = selectedPartner.categoryId ?? '';                        }                      },                      decoration: InputDecoration(                        hintText:                        "Select Partner",                        border: OutlineInputBorder(                          borderRadius:                          BorderRadius.circular(                            12,                          ),                        ),                      ),                    ),                    SizedBox(                      height: 20,                    ),                  ],                );              },            ),            const SizedBox(height: 4),            Text(              "Description",              style: const TextStyle(                fontFamily: "Proxima",                fontWeight: FontWeight.w600,                fontSize: 14,              ),            ),            const SizedBox(height: 4),            TextFormField(              controller: controller.descriptionController,              style: TextStyle(fontFamily: "Proxima", ),              decoration: InputDecoration(                hintText: "Input Description",                hintStyle: TextStyle(fontFamily: "Proxima", ),                border: OutlineInputBorder(                  borderRadius: BorderRadius.circular(8),                  borderSide: BorderSide(                    color: Colors.grey.shade300,                  ),                ),                filled: true,                fillColor: Colors.white,              ),            ),            SizedBox(height: 30),            ElevatedButton(onPressed: (){              controller.pickAndUploadAudio();            }, child: Text("add audio"))          ],        ),        ),      )),    );  }}