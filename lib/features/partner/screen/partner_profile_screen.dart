import 'package:flutter/material.dart';import 'package:get/get.dart';import 'package:tracenac/core/utils/app_color.dart';import '../controller/partner_controller.dart';import '../controller/partner_profile_controller.dart';class PartnerProfileScreen extends StatefulWidget {  final String partnerId,      partnerName,      partnerEmail,      partnerPhone,      partnerAddress1,      partnerAddress2,      partnerAddress3,      partnerCity,      partnerPinCode,      partnerCountry;  const PartnerProfileScreen({    super.key,    this.partnerId = "",    this.partnerName = "",    this.partnerEmail = "",    this.partnerPhone = "",    this.partnerAddress1 = "",    this.partnerAddress2 = "",    this.partnerAddress3 = "",    this.partnerCity = "",    this.partnerPinCode = "",    this.partnerCountry = "",  });  @override  State<PartnerProfileScreen> createState() => _PartnerProfileScreenState();}class _PartnerProfileScreenState extends State<PartnerProfileScreen> {  final GlobalKey<FormState> _formKey = GlobalKey<FormState>();  final PartnerProfileController controller = Get.put(    PartnerProfileController(),  );  final PartnerController partnerController = Get.put(PartnerController());  Future<void> _showDialog1(BuildContext context, content) {    return showDialog<void>(      context: context,      builder: (BuildContext context) {        return AlertDialog(          title: Text("Alert"),          content: Text(content),          actions: <Widget>[            TextButton(              child: Text("OK", style: TextStyle(color: AppColor.appBarColor)),              onPressed: () {                Navigator.of(context).pop();              },            ),          ],        );      },    );  }  assignPartner(partnerId) async {    try {      // await ApiService().assignPartners(assignedPartnerIds: [currentDealer!.partnerId!],);      setState(() {        _showDialog1(context, "Updated Successfully");      });    } catch (e) {      _showDialog1(context, "e");    }  }  @override  Widget build(BuildContext context) {    return Scaffold(      appBar: AppBar(        backgroundColor: AppColor.appBarColor,        leading: IconButton(          icon: Icon(Icons.arrow_back),          onPressed: () {            Navigator.pop(context);          },        ),        title: Text("Dealers Profile"),      ),      body: SingleChildScrollView(        child:            controller.isLoading.value                ? Center(child: CircularProgressIndicator())                : Form(                  key: _formKey,                  child: SizedBox(                    height: MediaQuery.of(context).size.height,                    child: Padding(                      padding: EdgeInsets.symmetric(                        horizontal: 16.0,                        vertical: 8.0,                      ),                      child: Column(                        mainAxisAlignment: MainAxisAlignment.start,                        crossAxisAlignment: CrossAxisAlignment.stretch,                        children: [                          /* Container(                            padding: EdgeInsets.all(8),                            child: TextFormField(                              onSaved: (value) {                                currentDealer?.company = value;                              },                              initialValue: currentDealer?.company,                              decoration: InputDecoration(                                contentPadding: EdgeInsets.all(8),                                enabledBorder: OutlineInputBorder(                                  borderRadius: BorderRadius.circular(                                    10,                                  ),                                  borderSide: BorderSide(                                    color: Color(0xFFEFE2E2),                                    width: 1.0,                                  ),                                ),                                focusedBorder: OutlineInputBorder(                                  borderRadius: BorderRadius.circular(                                    10,                                  ),                                  borderSide: BorderSide(                                    color: StyleConstants.appBarColor,                                    width: 1.0,                                  ),                                ),                                labelText: Constants.company,                                // borderRadius: BorderRadius.all(                                //   Radius.circular(10.0),                                // ),                              ),                            ),                          ),*/                          Container(                            padding: EdgeInsets.all(8),                            child: TextFormField(                              cursorColor: AppColor.appBarColor,                              readOnly: true,                              onSaved: (value) {                                partnerController                                    .partnerModelClass                                    ?.msg                                    ?.first                                    .partnerName;                                // currentDealer?.partnerId = value!;                              },                              // initialValue: currentDealer?.partnerId.toString(),                              decoration: InputDecoration(                                contentPadding: EdgeInsets.all(8),                                enabledBorder: OutlineInputBorder(                                  borderRadius: BorderRadius.circular(10),                                  borderSide: BorderSide(                                    color: Color(0xFFEFE2E2),                                    width: 1.0,                                  ),                                ),                                focusedBorder: OutlineInputBorder(                                  borderRadius: BorderRadius.circular(10),                                  borderSide: BorderSide(                                    color: AppColor.appBarColor,                                    width: 1.0,                                  ),                                ),                                labelText: "Partner Id",                                labelStyle: TextStyle(                                  color: AppColor.appBarColor,                                ),                                // borderRadius: BorderRadius.all(                                //   Radius.circular(10.0),                                // ),                              ),                            ),                          ),                          Container(                            padding: EdgeInsets.all(8),                            child: TextFormField(                              cursorColor: AppColor.appBarColor,                              readOnly: true,                              // onSaved: (value) {                              //   currentDealer?.partnerName = value;                              // },                              // initialValue: currentDealer?.partnerName,                              decoration: InputDecoration(                                contentPadding: EdgeInsets.all(8),                                enabledBorder: OutlineInputBorder(                                  borderRadius: BorderRadius.circular(10),                                  borderSide: BorderSide(                                    color: Color(0xFFEFE2E2),                                    width: 1.0,                                  ),                                ),                                focusedBorder: OutlineInputBorder(                                  borderRadius: BorderRadius.circular(10),                                  borderSide: BorderSide(                                    color: AppColor.appBarColor,                                    width: 1.0,                                  ),                                ),                                labelText: "Name",                                labelStyle: TextStyle(                                  color: AppColor.appBarColor,                                ),                                // borderRadius: BorderRadius.all(                                //   Radius.circular(10.0),                                // ),                              ),                            ),                          ),                          Container(                            padding: EdgeInsets.all(8),                            child: TextFormField(                              cursorColor: AppColor.appBarColor,                              readOnly: true,                              // onSaved: (value) {                              //   currentDealer?.partnerUserEmailId = value;                              // },                              // initialValue: currentDealer?.partnerUserEmailId,                              decoration: InputDecoration(                                contentPadding: EdgeInsets.all(8),                                enabledBorder: OutlineInputBorder(                                  borderRadius: BorderRadius.circular(10),                                  borderSide: BorderSide(                                    color: Color(0xFFEFE2E2),                                    width: 1.0,                                  ),                                ),                                focusedBorder: OutlineInputBorder(                                  borderRadius: BorderRadius.circular(10),                                  borderSide: BorderSide(                                    color: AppColor.appBarColor,                                    width: 1.0,                                  ),                                ),                                labelText: "Email",                                labelStyle: TextStyle(                                  color: AppColor.appBarColor,                                ),                                // borderRadius: BorderRadius.all(                                //   Radius.circular(10.0),                                // ),                              ),                            ),                          ),                          Container(                            padding: EdgeInsets.all(8),                            child: TextFormField(                              cursorColor: AppColor.appBarColor,                              readOnly: true,                              // onSaved: (value) {                              //   currentDealer?.partnerUserPhoneNo = value!;                              // },                              // initialValue: currentDealer?.partnerUserPhoneNo.toString(),                              decoration: InputDecoration(                                contentPadding: EdgeInsets.all(8),                                enabledBorder: OutlineInputBorder(                                  borderRadius: BorderRadius.circular(10),                                  borderSide: BorderSide(                                    color: Color(0xFFEFE2E2),                                    width: 1.0,                                  ),                                ),                                focusedBorder: OutlineInputBorder(                                  borderRadius: BorderRadius.circular(10),                                  borderSide: BorderSide(                                    color: AppColor.appBarColor,                                    width: 1.0,                                  ),                                ),                                labelText: "Phone",                                labelStyle: TextStyle(                                  color: AppColor.appBarColor,                                ),                                // borderRadius: BorderRadius.all(                                //   Radius.circular(10.0),                                // ),                              ),                            ),                          ),                          Container(                            padding: EdgeInsets.all(8),                            child: TextFormField(                              cursorColor: AppColor.appBarColor,                              // onSaved: (value) {                              //   currentDealer?.address1 = value;                              // },                              // initialValue: currentDealer?.address1,                              decoration: InputDecoration(                                contentPadding: EdgeInsets.all(8),                                enabledBorder: OutlineInputBorder(                                  borderRadius: BorderRadius.circular(10),                                  borderSide: BorderSide(                                    color: Color(0xFFEFE2E2),                                    width: 1.0,                                  ),                                ),                                focusedBorder: OutlineInputBorder(                                  borderRadius: BorderRadius.circular(10),                                  borderSide: BorderSide(                                    color: AppColor.appBarColor,                                    width: 1.0,                                  ),                                ),                                labelText: "Address1",                                labelStyle: TextStyle(                                  color: AppColor.appBarColor,                                ),                                // borderRadius: BorderRadius.all(                                //   Radius.circular(10.0),                                // ),                              ),                            ),                          ),                          Container(                            padding: EdgeInsets.all(8),                            child: TextFormField(                              cursorColor: AppColor.appBarColor,                              // onSaved: (value) {                              //   currentDealer?.address2 = value;                              // },                              // initialValue: currentDealer?.address2,                              decoration: InputDecoration(                                contentPadding: EdgeInsets.all(8),                                enabledBorder: OutlineInputBorder(                                  borderRadius: BorderRadius.circular(10),                                  borderSide: BorderSide(                                    color: Color(0xFFEFE2E2),                                    width: 1.0,                                  ),                                ),                                focusedBorder: OutlineInputBorder(                                  borderRadius: BorderRadius.circular(10),                                  borderSide: BorderSide(                                    color: AppColor.appBarColor,                                    width: 1.0,                                  ),                                ),                                labelText: "Road/Locality",                                labelStyle: TextStyle(                                  color: AppColor.appBarColor,                                ),                                // borderRadius: BorderRadius.all(                                //   Radius.circular(10.0),                                // ),                              ),                            ),                          ),                          Container(                            padding: EdgeInsets.all(8),                            child: TextFormField(                              // onSaved: (value) {                              //   currentDealer?.address3 = value;                              // },                              // initialValue: currentDealer?.address3,                              cursorColor: AppColor.appBarColor,                              decoration: InputDecoration(                                contentPadding: EdgeInsets.all(8),                                enabledBorder: OutlineInputBorder(                                  borderRadius: BorderRadius.circular(10),                                  borderSide: BorderSide(                                    color: Color(0xFFEFE2E2),                                    width: 1.0,                                  ),                                ),                                focusedBorder: OutlineInputBorder(                                  borderRadius: BorderRadius.circular(10),                                  borderSide: BorderSide(                                    color: AppColor.appBarColor,                                    width: 1.0,                                  ),                                ),                                labelText: "Landmark",                                labelStyle: TextStyle(                                  color: AppColor.appBarColor,                                ),                                // borderRadius: BorderRadius.all(                                //   Radius.circular(10.0),                                // ),                              ),                            ),                          ),                          Container(                            padding: EdgeInsets.all(8),                            child: TextFormField(                              readOnly: true,                              cursorColor: AppColor.appBarColor,                              // onSaved: (value) {                              //   currentDealer?.city = value;                              // },                              // initialValue: currentDealer?.city,                              decoration: InputDecoration(                                contentPadding: EdgeInsets.all(8),                                enabledBorder: OutlineInputBorder(                                  borderRadius: BorderRadius.circular(10),                                  borderSide: BorderSide(                                    color: Color(0xFFEFE2E2),                                    width: 1.0,                                  ),                                ),                                focusedBorder: OutlineInputBorder(                                  borderRadius: BorderRadius.circular(10),                                  borderSide: BorderSide(                                    color: AppColor.appBarColor,                                    width: 1.0,                                  ),                                ),                                labelText: "City",                                labelStyle: TextStyle(                                  color: AppColor.appBarColor,                                ),                                // hintText: Constants.city,                                // borderRadius: BorderRadius.all(                                //   Radius.circular(10.0),                                // ),                              ),                            ),                          ),                          Row(                            children: [                              Expanded(                                child: Container(                                  padding: EdgeInsets.all(8),                                  child: TextFormField(                                    cursorColor: AppColor.appBarColor,                                    readOnly: true,                                    // onSaved: (value) {                                    //   currentDealer?.pincode = int.parse(value!);                                    // },                                    // initialValue: currentDealer?.pincode.toString(),                                    decoration: InputDecoration(                                      contentPadding: EdgeInsets.all(8),                                      enabledBorder: OutlineInputBorder(                                        borderRadius: BorderRadius.circular(10),                                        borderSide: BorderSide(                                          color: Color(0xFFEFE2E2),                                          width: 1.0,                                        ),                                      ),                                      focusedBorder: OutlineInputBorder(                                        borderRadius: BorderRadius.circular(10),                                        borderSide: BorderSide(                                          color: AppColor.appBarColor,                                          width: 1.0,                                        ),                                      ),                                      // hintText: Constants.pinCode,                                      labelText: "Pincode",                                      labelStyle: TextStyle(                                        color: AppColor.appBarColor,                                      ),                                      // borderRadius: BorderRadius.all(                                      //   Radius.circular(10.0),                                      // ),                                    ),                                  ),                                ),                              ),                              Expanded(                                child: Container(                                  padding: EdgeInsets.all(8),                                  child: TextFormField(                                    readOnly: true,                                    cursorColor: AppColor.appBarColor,                                    // onSaved: (value) {                                    //   currentDealer?.country = value;                                    // },                                    // initialValue: currentDealer?.country,                                    decoration: InputDecoration(                                      contentPadding: EdgeInsets.all(8),                                      enabledBorder: OutlineInputBorder(                                        borderRadius: BorderRadius.circular(10),                                        borderSide: BorderSide(                                          color: Color(0xFFEFE2E2),                                          width: 1.0,                                        ),                                      ),                                      focusedBorder: OutlineInputBorder(                                        borderRadius: BorderRadius.circular(10),                                        borderSide: BorderSide(                                          color: AppColor.appBarColor,                                          width: 1.0,                                        ),                                      ),                                      hintText: "Country",                                      labelStyle: TextStyle(                                        color: AppColor.appBarColor,                                      ),                                      // borderRadius: BorderRadius.all(                                      //   Radius.circular(10.0),                                      // ),                                    ),                                  ),                                ),                              ),                            ],                          ),                          ElevatedButton(                            style: ElevatedButton.styleFrom(                              backgroundColor: AppColor.appBarColor,                            ),                            onPressed: () async {                              // if (_formKey.currentState!.validate()) {                              //   _formKey.currentState!.save();                              //   try {                              //     currentDealer = await ApiService()                              //         .updateDealerProfile(currentDealer?.id,currentDealer?.address1,currentDealer?.address2,currentDealer?.address3);                              //     setState(() {                              //       loading = false;                              //       _showDialog1(                              //         context,                              //         Constants.updateSuccess,                              //       );                              //     });                              //   } catch (e) {                              //     _showDialog1(context, e.toString());                              //     setState(() {                              //       loading = false;                              //     });                              //   }                              // }                            },                            child: Text("Update"),                          ),                          Row(                            mainAxisAlignment: MainAxisAlignment.spaceBetween,                            children: [                              ElevatedButton(                                style: ElevatedButton.styleFrom(                                  backgroundColor: AppColor.appBarColor,                                ),                                child: Text('Assign Partner'),                                onPressed: () async {                                  // assignPartner(currentDealer!.partnerId!);                                },                              ),                              ElevatedButton(                                style: ElevatedButton.styleFrom(                                  backgroundColor: AppColor.appBarColor,                                ),                                onPressed: () {                                  // setLocation();                                  // _getCurrentPosition();                                },                                child: Text("Set Location"),                              ),                            ],                          ),                        ],                      ),                    ),                  ),                ),      ),    );  }}